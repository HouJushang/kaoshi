webpackJsonp([16],{extM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("Dd8w"),r=a.n(o),i=a("woOf"),n=a.n(i),l=a("vLgD");var d={name:"listParperPage",data:function(){return{listLoading:!1,addShow:!1,addLoading:!1,pageInfo:{pageNum:1,pageSize:10,total:0},addForm:{title:"",type:0,optionA:"",optionB:"",optionC:"",optionD:"",answer2:[],answer1:""},formType:0,addFormCopy:{},listData:[],addRules:{title:[{required:!0,message:"题目内容必填",trigger:"blur"}],optionA:[{required:!0,message:"选项内容必填",trigger:"blur"}],optionB:[{required:!0,message:"选项内容必填",trigger:"blur"}],optionC:[{required:!0,message:"选项内容必填",trigger:"blur"}],optionD:[{required:!0,message:"选项内容必填",trigger:"blur"}],answer1:[{required:!0,message:"答案必填",trigger:"blur"}],answer2:[{required:!0,message:"答案必填",trigger:"blur"}]}}},methods:{handleSizeChange:function(e){this.pageInfo.pageNum=1,this.pageInfo.pageSize=e,this.getList()},handleCurrentChange:function(e){this.pageInfo.pageNum=e,this.getList()},getList:function(){var e,t=this;this.listLoading=!0,(e={pageInfo:this.pageInfo,where:{parperId:this.$route.params.id}},Object(l.a)({url:"option/list",method:"post",data:e})).then(function(e){t.listData=e.rows,t.pageInfo.total=e.count,t.listLoading=!1}).catch(function(e){t.listLoading=!1})},delItem:function(e){var t=this;this.$confirm("确认删除","提示",{type:"warning"}).then(function(a){var o;(o={id:e.id},Object(l.a)({url:"option/del",method:"delete",params:o})).then(function(e){t.getList()}).catch(function(e){t.$message.error(e)})}).catch(function(e){console.log("取消删除")})},addShowFn:function(){this.formType=0,void 0!==this.$refs.addForm&&this.$refs.addForm.resetFields(),n()(this.addForm,this.addFormCopy),this.addShow=!0},editItem:function(e){this.formType=1,void 0!==this.$refs.addForm&&this.$refs.addForm.resetFields(),0===e.type&&(this.addForm.answer1=e.answer),1===e.type&&(this.addForm.answer2=e.answer.split(",")),n()(this.addForm,e),this.addShow=!0},submitAddForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;0===t.addForm.type&&(a=t.addForm.answer1),1===t.addForm.type&&(a=t.addForm.answer2.join()),t.addLoading=!0,[function(e){return Object(l.a)({url:"option/add",method:"post",data:e})},function(e){return Object(l.a)({url:"option/update",method:"post",data:e})}][t.formType](r()({},t.addForm,{answer:a,parperId:t.$route.params.id})).then(function(e){t.addShow=!1,t.getList(),t.addLoading=!1}).catch(function(e){t.addLoading=!1})})}},computed:{},created:function(){n()(this.addFormCopy,this.addForm),this.getList()}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"listParperPage page"},[a("div",{staticClass:"pageTitle",staticStyle:{"margin-bottom":"10px",overflow:"hidden"}},[e._v("\n    "+e._s(e.$route.params.name)+"--试题管理  "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:e.addShowFn}},[e._v("添加试题")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.listData,border:"",size:"mini"}},[a("el-table-column",{attrs:{prop:"title",label:"题目名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(["单选","多选"][t.row.type])+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"optionA",label:"选项A"}}),e._v(" "),a("el-table-column",{attrs:{prop:"optionB",label:"选项B"}}),e._v(" "),a("el-table-column",{attrs:{prop:"optionC",label:"选项C"}}),e._v(" "),a("el-table-column",{attrs:{prop:"optionD",label:"选项D"}}),e._v(" "),a("el-table-column",{attrs:{prop:"answer",label:"答案"}}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateFormat")(t.row.createdAt,"yyyy-MM-dd hh:mm:ss"))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.delItem(t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.editItem(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("div",{staticClass:"pageWrapper"},[a("el-pagination",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100],"current-page":e.pageInfo.pageNum,"page-size":e.pageInfo.pageSize,total:e.pageInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"",visible:e.addShow,width:"30%"},on:{"update:visible":function(t){e.addShow=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"status-icon":"",rules:e.addRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"题目内容",prop:"title"}},[a("el-input",{attrs:{maxlength:"20","auto-complete":"off"},model:{value:e.addForm.title,callback:function(t){e.$set(e.addForm,"title","string"==typeof t?t.trim():t)},expression:"addForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"题目类型"}},[a("el-radio",{attrs:{label:0},model:{value:e.addForm.type,callback:function(t){e.$set(e.addForm,"type",e._n(t))},expression:"addForm.type"}},[e._v("单选")]),e._v(" "),a("el-radio",{attrs:{label:1},model:{value:e.addForm.type,callback:function(t){e.$set(e.addForm,"type",e._n(t))},expression:"addForm.type"}},[e._v("多选")])],1),e._v(" "),a("el-form-item",{attrs:{label:"选项A",prop:"optionA"}},[a("el-input",{model:{value:e.addForm.optionA,callback:function(t){e.$set(e.addForm,"optionA","string"==typeof t?t.trim():t)},expression:"addForm.optionA"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选项B",prop:"optionB"}},[a("el-input",{model:{value:e.addForm.optionB,callback:function(t){e.$set(e.addForm,"optionB","string"==typeof t?t.trim():t)},expression:"addForm.optionB"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选项C",prop:"optionC"}},[a("el-input",{model:{value:e.addForm.optionC,callback:function(t){e.$set(e.addForm,"optionC","string"==typeof t?t.trim():t)},expression:"addForm.optionC"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选项D",prop:"optionD"}},[a("el-input",{model:{value:e.addForm.optionD,callback:function(t){e.$set(e.addForm,"optionD","string"==typeof t?t.trim():t)},expression:"addForm.optionD"}})],1),e._v(" "),0===e.addForm.type?a("el-form-item",{attrs:{label:"答案",prop:"answer1"}},[a("el-radio",{attrs:{label:"A"},model:{value:e.addForm.answer1,callback:function(t){e.$set(e.addForm,"answer1",t)},expression:"addForm.answer1"}},[e._v("A")]),e._v(" "),a("el-radio",{attrs:{label:"B"},model:{value:e.addForm.answer1,callback:function(t){e.$set(e.addForm,"answer1",t)},expression:"addForm.answer1"}},[e._v("B")]),e._v(" "),a("el-radio",{attrs:{label:"C"},model:{value:e.addForm.answer1,callback:function(t){e.$set(e.addForm,"answer1",t)},expression:"addForm.answer1"}},[e._v("C")]),e._v(" "),a("el-radio",{attrs:{label:"D"},model:{value:e.addForm.answer1,callback:function(t){e.$set(e.addForm,"answer1",t)},expression:"addForm.answer1"}},[e._v("D")])],1):e._e(),e._v(" "),1===e.addForm.type?a("el-form-item",{attrs:{label:"答案",prop:"answer2"}},[a("el-checkbox-group",{model:{value:e.addForm.answer2,callback:function(t){e.$set(e.addForm,"answer2",t)},expression:"addForm.answer2"}},[a("el-checkbox",{attrs:{label:"A"}}),e._v(" "),a("el-checkbox",{attrs:{label:"B"}}),e._v(" "),a("el-checkbox",{attrs:{label:"C"}}),e._v(" "),a("el-checkbox",{attrs:{label:"D"}})],1)],1):e._e()],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.addShow=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.addLoading},on:{click:function(t){e.submitAddForm("addForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(d,s,!1,function(e){a("vC6b")},"data-v-37610a16",null);t.default=p.exports},kxyv:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"",""])},vC6b:function(e,t,a){var o=a("kxyv");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("ce31cb32",o,!0)}});