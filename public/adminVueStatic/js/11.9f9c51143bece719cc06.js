webpackJsonp([11],{L9TO:function(t,e,a){"use strict";e.a=function(t){return Object(o.a)({url:"news/add",method:"post",data:t})},e.c=function(t){return Object(o.a)({url:"news/list",method:"get",params:t})},e.b=function(t){return Object(o.a)({url:"news/del",method:"delete",params:t})},e.d=function(t){return Object(o.a)({url:"news/update",method:"post",data:t})};var o=a("vLgD")},LbJp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("woOf"),i=a.n(o),n=a("Dd8w"),r=a.n(n),d=a("L9TO"),s={name:"downloadPage",data:function(){return{formType:0,addLoading:!1,addShow:!1,listLoading:!1,pageInfo:{pageNum:1,pageSize:10,total:0},addForm:{title:"",category:"通知公告",content:""},addFormCopy:{},listData:[],addFormRules:{title:[{required:!0,message:"请输入活动名称",trigger:"blur"}],category:[{required:!0,message:"请选择分类",trigger:"blur"}],content:[{required:!0,message:"请填写内容",trigger:"blur"}]}}},methods:{handleSizeChange:function(t){this.pageInfo.pageNum=1,this.pageInfo.pageSize=t,this.getList()},handleCurrentChange:function(t){this.pageInfo.pageNum=t,this.getList()},getList:function(){var t=this;this.listLoading=!0,Object(d.c)(this.pageInfo).then(function(e){t.listData=e.rows,t.pageInfo.total=e.count,t.listLoading=!1}).catch(function(e){t.listLoading=!1})},delItem:function(t){var e=this;this.$confirm("确认删除","提示",{type:"warning"}).then(function(a){Object(d.b)({id:t.id}).then(function(t){e.getList()}).catch(function(t){e.$message.error(t)})}).catch(function(t){console.log("取消删除")})},submitAddForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.addLoading=!0,[d.a,d.d][e.formType](r()({},e.addForm)).then(function(t){e.addShow=!1,e.getList(),e.addLoading=!1}).catch(function(t){e.addLoading=!1})})},addShowFn:function(){this.formType=0,void 0!==this.$refs.addForm&&this.$refs.addForm.resetFields(),i()(this.addForm,this.addFormCopy),this.addShow=!0},editItem:function(t){this.formType=1,void 0!==this.$refs.addForm&&this.$refs.addForm.resetFields(),i()(this.addForm,t),this.addShow=!0}},computed:{},created:function(){i()(this.addFormCopy,this.addForm),this.getList()}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addDownloadPage page"},[a("div",{staticClass:"pageTitle",staticStyle:{"margin-bottom":"10px",overflow:"hidden"}},[a("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:t.addShowFn}},[t._v("添加信息")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.listData,border:"",size:"mini"}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),t._v(" "),a("el-table-column",{attrs:{prop:"category",label:"分类"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("dateFormat")(e.row.createdAt,"yyyy-MM-dd hh:mm:ss"))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"year",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.delItem(e.row)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.editItem(e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),a("div",{staticClass:"pageWrapper"},[a("el-pagination",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100],"current-page":t.pageInfo.pageNum,"page-size":t.pageInfo.pageSize,total:t.pageInfo.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"",visible:t.addShow,width:"50%"},on:{"update:visible":function(e){t.addShow=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,"status-icon":"",rules:t.addFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:t.addForm.title,callback:function(e){t.$set(t.addForm,"title",e)},expression:"addForm.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分类",prop:"category"}},[a("el-select",{attrs:{placeholder:"分类"},model:{value:t.addForm.category,callback:function(e){t.$set(t.addForm,"category",e)},expression:"addForm.category"}},t._l(["通知公告","政策法规"],function(t){return a("el-option",{attrs:{label:t,value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"内容",prop:"title"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:20},placeholder:"请输入内容"},model:{value:t.addForm.content,callback:function(e){t.$set(t.addForm,"content",e)},expression:"addForm.content"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.addShow=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.addLoading},on:{click:function(e){t.submitAddForm("addForm")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,l,!1,function(t){a("hObW")},"data-v-1aa050f0",null);e.default=c.exports},NJNM:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},hObW:function(t,e,a){var o=a("NJNM");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("rjj0")("3bc29b66",o,!0)}});