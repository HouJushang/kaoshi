webpackJsonp([7],{Ho3v:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},N4t5:function(t,e,a){var r=a("Ho3v");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("94964f2c",r,!0)},af7O:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("woOf"),i=a.n(r),o=a("Dd8w"),n=a.n(o),l=a("c9eL"),d=a("h0S9"),s={name:"listParperPage",data:function(){return{courseArr:[],listLoading:!1,addShow:!1,addLoading:!1,formType:0,pageInfo:{pageNum:1,pageSize:10,total:0},listData:[],addForm:{title:"",radio_rank:"",multiple_rank:"",time:"",courseId:""},addFormCopy:{},addFormRules:{title:[{required:!0,message:"请输入考试名称",trigger:"blur"}],radio_rank:[{required:!0,message:"单选分值必填",trigger:"blur"}],multiple_rank:[{required:!0,message:"多选分值必填",trigger:"blur"}],time:[{required:!0,message:"考试时间",trigger:"blur"}],courseId:[{required:!0,message:"选择课程",trigger:"blur"}]}}},methods:{handleSizeChange:function(t){this.pageInfo.pageNum=1,this.pageInfo.pageSize=t,this.getList()},handleCurrentChange:function(t){this.pageInfo.pageNum=t,this.getList()},getList:function(){var t=this;this.listLoading=!0,Object(l.c)(this.pageInfo).then(function(e){t.listData=e.rows,t.pageInfo.total=e.count,t.listLoading=!1}).catch(function(e){t.listLoading=!1})},delItem:function(t){var e=this;this.$confirm("确认删除"+t.title,"提示",{type:"warning"}).then(function(a){Object(l.b)({id:t.id}).then(function(t){e.getList()}).catch(function(t){e.$message.error(t)})}).catch(function(t){console.log("取消删除")})},getCourseList:function(){var t=this;Object(d.b)().then(function(e){t.courseArr=e})},submitAddForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.addLoading=!0,[l.a,l.d][e.formType](n()({},e.addForm)).then(function(t){e.addShow=!1,e.getList(),e.addLoading=!1}).catch(function(t){e.addLoading=!1})})},addShowFn:function(){this.formType=0,void 0!==this.$refs.addForm&&this.$refs.addForm.resetFields(),i()(this.addForm,this.addFormCopy),this.addShow=!0},editItem:function(t){this.formType=1,void 0!==this.$refs.addForm&&this.$refs.addForm.resetFields(),i()(this.addForm,t),this.addShow=!0},goItem:function(t){console.log(t),this.$router.push({name:"option",params:{name:t.title,id:t.id}})}},computed:{},created:function(){this.getCourseList(),this.getList(),i()(this.addFormCopy,this.addForm)}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"listParperPage page"},[a("div",{staticClass:"pageTitle",staticStyle:{"margin-bottom":"10px",overflow:"hidden"}},[a("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:t.addShowFn}},[t._v("添加试卷")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.listData,border:""}},[a("el-table-column",{attrs:{prop:"title",label:"试卷标题"}}),t._v(" "),a("el-table-column",{attrs:{prop:"course.name",label:"课程名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"radio_rank",label:"单选分值"}}),t._v(" "),a("el-table-column",{attrs:{prop:"multiple_rank",label:"多选分值"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",label:"考试时间（分钟）"}}),t._v(" "),a("el-table-column",{attrs:{label:"添加时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("dateFormat")(e.row.createdAt,"yyyy-MM-dd hh:mm:ss"))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.delItem(e.row)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.editItem(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.goItem(e.row)}}},[t._v("管理题目")])]}}])})],1),t._v(" "),a("div",{staticClass:"pageWrapper"},[a("el-pagination",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100],"current-page":t.pageInfo.pageNum,"page-size":t.pageInfo.pageSize,total:t.pageInfo.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"",visible:t.addShow,width:"30%"},on:{"update:visible":function(e){t.addShow=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,"status-icon":"",rules:t.addFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"考试名称",prop:"title"}},[a("el-input",{model:{value:t.addForm.title,callback:function(e){t.$set(t.addForm,"title",e)},expression:"addForm.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"单选分数",prop:"radio_rank"}},[a("el-input",{attrs:{type:"number"},model:{value:t.addForm.radio_rank,callback:function(e){t.$set(t.addForm,"radio_rank",e)},expression:"addForm.radio_rank"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"多选分数",prop:"multiple_rank"}},[a("el-input",{attrs:{type:"number"},model:{value:t.addForm.multiple_rank,callback:function(e){t.$set(t.addForm,"multiple_rank",e)},expression:"addForm.multiple_rank"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"考试时间",prop:"time"}},[a("el-input",{attrs:{type:"number"},model:{value:t.addForm.time,callback:function(e){t.$set(t.addForm,"time",e)},expression:"addForm.time"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"选择课程",prop:"courseId"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:1==t.formType},model:{value:t.addForm.courseId,callback:function(e){t.$set(t.addForm,"courseId",e)},expression:"addForm.courseId"}},[a("el-option",{attrs:{label:"请选择",value:""}}),t._v(" "),t._l(t.courseArr,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})],2)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.addShow=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",loading:t.addLoading},on:{click:function(e){t.submitAddForm("addForm")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,u,!1,function(t){a("N4t5")},"data-v-1be88302",null);e.default=c.exports},c9eL:function(t,e,a){"use strict";e.a=function(t){return Object(r.a)({url:"parper/add",method:"post",data:t})},e.c=function(t){return Object(r.a)({url:"parper/list",method:"get",params:t})},e.b=function(t){return Object(r.a)({url:"parper/del",method:"delete",params:t})},e.d=function(t){return Object(r.a)({url:"parper/update",method:"post",data:t})};var r=a("vLgD")}});