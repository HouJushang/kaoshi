webpackJsonp([61],{epgg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Dd8w"),o=a.n(r),i=a("vLgD");var s={name:"courseItemPage",data:function(){return{addShow:!1,baseURL:"/admin/",addForm:{video:"",rank:0,name:"",time:0},listData:[],addFormRules:{name:[{required:!0,message:"请输入课程名称",trigger:"blur"}],rank:[{required:!0,message:"请输入学分",trigger:"blur"}],time:[{required:!0,message:"学习时长",trigger:"blur"}],video:[{required:!0,message:"请选择视频",trigger:"blur"}]}}},methods:{uploadSuccess:function(e){"success"==e.code?this.addForm.video=e.data.url:alert("文件上传失败")},showFn:function(e){this.$refs[e]&&this.$refs[e].resetFields(),this.addShow=!0},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a;(a=o()({},t.addForm,{courseId:t.$route.params.id}),Object(i.a)({url:"courseItem/add",method:"post",data:a})).then(function(e){t.addShow=!1,t.getList()}).catch(function(e){console.log(1)})})},removeFn:function(){this.addForm.video=""},getList:function(){var e,t=this;this.listLoading=!0,(e={courseId:this.$route.params.id},Object(i.a)({url:"courseItem/list",method:"get",params:e})).then(function(e){t.listData=e,t.listLoading=!1}).catch(function(e){t.listLoading=!1})},delItem:function(e){var t=this;this.$confirm("确认删除","提示",{type:"warning"}).then(function(a){var r;(r={id:e.id},Object(i.a)({url:"courseItem/del",method:"delete",params:r})).then(function(e){t.getList()}).catch(function(e){t.$message.error(e)})}).catch(function(e){console.log("取消删除")})}},created:function(){this.getList()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"courseItemPage page"},[a("div",{staticClass:"topWraper",staticStyle:{display:"flex","justify-content":"space-between","margin-bottom":"10px"}},[a("h1",[e._v("\n      "+e._s(e.$route.params.name)+"-子课程管理\n    ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){e.showFn("addForm")}}},[e._v("添加")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.listData,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"课程名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rank",label:"学分"}}),e._v(" "),a("el-table-column",{attrs:{prop:"video",label:"视频地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:" 学习时长"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.delItem(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加",visible:e.addShow,width:"30%"},on:{"update:visible":function(t){e.addShow=t}}},[a("el-form",{ref:"addForm",staticClass:"demo-ruleForm",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px",size:"mini"}},[a("el-form-item",{attrs:{label:"课程名称",prop:"rank"}},[a("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学分",prop:"rank"}},[a("el-input",{attrs:{type:"number",placeholder:"时间秒"},model:{value:e.addForm.rank,callback:function(t){e.$set(e.addForm,"rank",t)},expression:"addForm.rank"}})],1),e._v(" "),a("el-form-item",{attrs:{label:" 学习时长",prop:"time"}},[a("el-input",{attrs:{type:"number"},model:{value:e.addForm.time,callback:function(t){e.$set(e.addForm,"time",t)},expression:"addForm.time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"视频",prop:"video"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.addForm.video,expression:"addForm.video"}],attrs:{type:"hidden"},domProps:{value:e.addForm.video},on:{input:function(t){t.target.composing||e.$set(e.addForm,"video",t.target.value)}}}),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:e.baseURL+"upload","on-remove":e.removeFn,"on-success":e.uploadSuccess,multiple:"",limit:1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("addForm")}}},[e._v("立即添加")])],1)],1)],1)],1)},staticRenderFns:[]},l=a("VU/8")(s,n,!1,null,null,null);t.default=l.exports}});